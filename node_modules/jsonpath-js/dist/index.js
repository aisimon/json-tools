"use strict";var Bs=Object.create;var ue=Object.defineProperty;var _s=Object.getOwnPropertyDescriptor;var Us=Object.getOwnPropertyNames;var Ws=Object.getPrototypeOf,zs=Object.prototype.hasOwnProperty;var Gs=(n,o)=>()=>(o||n((o={exports:{}}).exports,o),o.exports),Hs=(n,o)=>{for(var t in o)ue(n,t,{get:o[t],enumerable:!0})},_t=(n,o,t,l)=>{if(o&&typeof o=="object"||typeof o=="function")for(let g of Us(o))!zs.call(n,g)&&g!==t&&ue(n,g,{get:()=>o[g],enumerable:!(l=_s(o,g))||l.enumerable});return n};var qs=(n,o,t)=>(t=n!=null?Bs(Ws(n)):{},_t(o||!n||!n.__esModule?ue(t,"default",{value:n,enumerable:!0}):t,n)),Xs=n=>_t(ue({},"__esModule",{value:!0}),n);var zt=Gs((Co,Wt)=>{"use strict";function Ut(n,o){return o.reduce(function(t,l){return{type:"LogicalBinary",operator:l[1],left:t,right:l[3]}},n)}function Ks(n,o){return n?{type:"LogicalUnary",operator:"!",expr:o}:o}var G=class extends SyntaxError{constructor(o,t,l,g){super(o),this.expected=t,this.found=l,this.location=g,this.name="SyntaxError"}format(o){let t="Error: "+this.message;if(this.location){let l=null,g=o.find(b=>b.source===this.location.source);g&&(l=g.text.split(/\r\n|\n|\r/g));let h=this.location.start,C=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,S=this.location.source+":"+C.line+":"+C.column;if(l){let b=this.location.end,P="".padEnd(C.line.toString().length," "),_=l[h.line-1],A=(h.line===b.line?b.column:_.length+1)-h.column||1;t+=`
 --> `+S+`
`+P+` |
`+C.line+" | "+_+`
`+P+" | "+"".padEnd(h.column-1," ")+"".padEnd(A,"^")}else t+=`
 at `+S}return t}static buildMessage(o,t){function l(A){return A.codePointAt(0).toString(16).toUpperCase()}let g=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function h(A){return g?A.replace(g,x=>"\\u{"+l(x)+"}"):A}function C(A){return h(A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,x=>"\\x0"+l(x)).replace(/[\x10-\x1F\x7F-\x9F]/g,x=>"\\x"+l(x)))}function S(A){return h(A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,x=>"\\x0"+l(x)).replace(/[\x10-\x1F\x7F-\x9F]/g,x=>"\\x"+l(x)))}let b={literal(A){return'"'+C(A.text)+'"'},class(A){let x=A.parts.map(D=>Array.isArray(D)?S(D[0])+"-"+S(D[1]):S(D));return"["+(A.inverted?"^":"")+x.join("")+"]"+(A.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(A){return A.description}};function P(A){return b[A.type](A)}function _(A){let x=A.map(P);if(x.sort(),x.length>0){let D=1;for(let k=1;k<x.length;k++)x[k-1]!==x[k]&&(x[D]=x[k],D++);x.length=D}switch(x.length){case 1:return x[0];case 2:return x[0]+" or "+x[1];default:return x.slice(0,-1).join(", ")+", or "+x[x.length-1]}}function re(A){return A?'"'+C(A)+'"':"end of input"}return"Expected "+_(o)+" but "+re(t)+" found."}};function Ys(n,o){o=o!==void 0?o:{};let t={},l=o.grammarSource,g={JsonpathQuery:Je},h=Je,C="$",S='"',b="'",P="\\",_="b",re="f",A="n",x="r",D="t",k="/",Ge="u",Ae="d",mr="*",yr="0",hr="-",He=":",dr="?",ne="||",se="&&",qe="(",Xe=")",$r="!",Nr="@",Ke="==",Ye="!=",Ze="<=",et=">=",Fe="[",Ce="]",be=".",tt="-0",xr="e",rt="true",nt="false",st="null",oe=",",ot="..",Ar=/^[\t-\n\r ]/,Fr=/^[ -!#-&(-[\]-\uD7FF\uE000-\uFFFF]/,it=/^[\uD800-\uDBFF]/,ft=/^[\uDC00-\uDFFF]/,Cr=/^[ABCEF]/i,br=/^[0-7]/,Sr=/^[89AB]/i,Lr=/^[CDEF]/i,Tr=/^[ABCDEF]/i,Er=/^[1-9]/,wr=/^[<>]/,Jr=/^[\-+]/,Dr=/^[0-9_a-z]/,vr=/^[a-z]/,Rr=/^[_\x80-\uD7FF\uE000-\uFFFF]/,Or=/^[0-9]/,Ir=/^[a-z]/i,jr=L([["	",`
`],"\r"," "],!1,!1,!1),Pr=d("$",!1),ie=d('"',!1),fe=d("'",!1),Se=d("\\",!1),Mr=L([[" ","!"],["#","&"],["(","["],["]","\uD7FF"],["\uE000","\uFFFF"]],!1,!1,!1),lt=L([["\uD800","\uDBFF"]],!1,!1,!1),at=L([["\uDC00","\uDFFF"]],!1,!1,!1),Vr=d("b",!1),kr=d("f",!1),Qr=d("n",!1),Br=d("r",!1),_r=d("t",!1),Ur=d("/",!1),ct=d("u",!1),Wr=L(["A","B","C","E","F"],!1,!0,!1),Le=d("D",!0),zr=L([["0","7"]],!1,!1,!1),Gr=L(["8","9","A","B"],!1,!0,!1),Hr=L(["C","D","E","F"],!1,!0,!1),qr=L(["A","B","C","D","E","F"],!1,!0,!1),Xr=d("*",!1),Kr=d("0",!1),Yr=d("-",!1),Zr=L([["1","9"]],!1,!1,!1),ut=d(":",!1),en=d("?",!1),pt=d("||",!1),gt=d("&&",!1),mt=d("(",!1),yt=d(")",!1),tn=d("!",!1),rn=d("@",!1),nn=d("==",!1),sn=d("!=",!1),on=d("<=",!1),fn=d(">=",!1),ln=L(["<",">"],!1,!1,!1),Te=d("[",!1),Ee=d("]",!1),we=d(".",!1),an=d("-0",!1),cn=d("e",!0),un=L(["-","+"],!1,!1,!1),pn=d("true",!1),gn=d("false",!1),mn=d("null",!1),yn=L([["0","9"],"_",["a","z"]],!1,!1,!1),hn=L([["a","z"]],!1,!1,!1),le=d(",",!1),dn=L(["_",["\x80","\uD7FF"],["\uE000","\uFFFF"]],!1,!1,!1),$n=L([["0","9"]],!1,!1,!1),Nn=L([["a","z"]],!1,!0,!1),xn=d("..",!1);function An(e){return{type:"Root",segments:e}}function Fn(e){return{type:"NameSelector",member:e}}function Cn(e){return e.join("")}function bn(e){return e.join("")}function Sn(){return"\b"}function Ln(){return"\f"}function Tn(){return`
`}function En(){return"\r"}function wn(){return"	"}function Jn(){return"/"}function Dn(){return"\\"}function vn(e){return String.fromCharCode(...e)}function Rn(e){return[e]}function go(e){return e}function On(){return parseInt(W(),16)}function In(){return parseInt(W(),16)}function jn(){return parseInt(W(),16)}function Pn(){return parseInt(W(),16)}function Mn(){return{type:"WildcardSelector"}}function Vn(e){return{type:"IndexSelector",index:e}}function kn(){return 0}function Qn(){let e=parseInt(W());if(Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER)return e;throw new Error(`Index must be within the range of I-JSON: ${e}`)}function Bn(e,r,i){return{type:"SliceSelector",start:e,end:r,step:i}}function _n(e){return{type:"FilterSelector",expr:e}}function Un(e,r){return Ut(e,r)}function Wn(e,r){return Ut(e,r)}function zn(e,r){return e?{type:"LogicalUnary",operator:"!",expr:r}:r}function Gn(e,r){return Ks(e,{type:"TestExpr",query:r})}function Hn(e){return{type:"CurrentNode",segments:e}}function qn(e,r,i){return{type:"ComparisonExpr",left:e,operator:r,right:i}}function Xn(e){return{type:"Literal",member:e}}function Kn(e){return{type:"CurrentNode",segments:e}}function Yn(e){return{type:"Root",segments:e}}function mo(e){return e}function Zn(e){return[e]}function es(e){return[e]}function ts(e){return[e]}function rs(e,r,i){return parseFloat(`${e}${r??""}${i?`e${i}`:""}`)}function ns(e,r){return parseInt(`${e||""}${r.join("")}`)}function ss(){return!0}function os(){return!1}function is(){return null}function fs(e,r){let i=r[0],f=r[1];return{type:"FunctionExpr",name:e,args:[i].concat(f)}}function ls(e){return[e]}function as(e,r){return[e].concat(r)}function cs(){return{type:"MemberNameShorthand",member:W()}}function us(e){return Array.isArray(e)?{type:"DescendantSegment",selectors:e}:{type:"DescendantSegment",selectors:[e]}}let s=o.peg$currPos|0,m=s,U=[{line:1,column:1}],J=s,ae=o.peg$maxFailExpected||[],p=o.peg$silentFails|0,K;if(o.startRule){if(!(o.startRule in g))throw new Error(`Can't start parsing from rule "`+o.startRule+'".');h=g[o.startRule]}function W(){return n.substring(m,s)}function yo(){return m}function ho(){return{source:l,start:m,end:s}}function $o(){return Y(m,s)}function No(e,r){throw r=r!==void 0?r:Y(m,s),dt([ms(e)],n.substring(m,s),r)}function xo(e,r){throw r=r!==void 0?r:Y(m,s),ys(e,r)}function ps(e=s){let r=n.codePointAt(e);return r===void 0?"":String.fromCodePoint(r)}function d(e,r){return{type:"literal",text:e,ignoreCase:r}}function L(e,r,i,f){return{type:"class",parts:e,inverted:r,ignoreCase:i,unicode:f}}function Ao(){return{type:"any"}}function gs(){return{type:"end"}}function ms(e){return{type:"other",description:e}}function ht(e){let r=U[e],i;if(r)return r;if(e>=U.length)i=U.length-1;else for(i=e;!U[--i];);for(r=U[i],r={line:r.line,column:r.column};i<e;)n.charCodeAt(i)===10?(r.line++,r.column=1):r.column++,i++;return U[e]=r,r}function Y(e,r,i){let f=ht(e),a=ht(r),c={source:l,start:{offset:e,line:f.line,column:f.column},end:{offset:r,line:a.line,column:a.column}};return i&&l&&typeof l.offset=="function"&&(c.start=l.offset(c.start),c.end=l.offset(c.end)),c}function u(e){s<J||(s>J&&(J=s,ae=[]),ae.push(e))}function ys(e,r){return new G(e,null,null,r)}function dt(e,r,i){return new G(G.buildMessage(e,r),e,r,i)}function Je(){let e,r,i;return e=s,r=xt(),r!==t?(i=$t(),m=e,e=An(i)):(s=e,e=t),e}function $t(){let e,r,i,f;for(e=[],r=s,i=N(),f=Pt(),f!==t?r=f:(s=r,r=t);r!==t;)e.push(r),r=s,i=N(),f=Pt(),f!==t?r=f:(s=r,r=t);return e}function N(){let e,r;for(e=[],r=Nt();r!==t;)e.push(r),r=Nt();return e}function Nt(){let e;return e=n.charAt(s),Ar.test(e)?s++:(e=t,p===0&&u(jr)),e}function xt(){let e;return n.charCodeAt(s)===36?(e=C,s++):(e=t,p===0&&u(Pr)),e}function De(){let e;return e=At(),e===t&&(e=ve(),e===t&&(e=As(),e===t&&(e=Tt(),e===t&&(e=Fs())))),e}function At(){let e,r;return e=s,r=Ft(),r!==t&&(m=e,r=Fn(r)),e=r,e}function Ft(){let e,r,i,f;if(e=s,n.charCodeAt(s)===34?(r=S,s++):(r=t,p===0&&u(ie)),r!==t){for(i=[],f=Ct();f!==t;)i.push(f),f=Ct();n.charCodeAt(s)===34?(f=S,s++):(f=t,p===0&&u(ie)),f!==t?(m=e,e=Cn(i)):(s=e,e=t)}else s=e,e=t;if(e===t)if(e=s,n.charCodeAt(s)===39?(r=b,s++):(r=t,p===0&&u(fe)),r!==t){for(i=[],f=bt();f!==t;)i.push(f),f=bt();n.charCodeAt(s)===39?(f=b,s++):(f=t,p===0&&u(fe)),f!==t?(m=e,e=bn(i)):(s=e,e=t)}else s=e,e=t;return e}function Ct(){let e,r,i;return e=St(),e===t&&(n.charCodeAt(s)===39?(e=b,s++):(e=t,p===0&&u(fe)),e===t&&(e=s,r=ce(),r!==t?(n.charCodeAt(s)===34?(i=S,s++):(i=t,p===0&&u(ie)),i!==t?e=i:(s=e,e=t)):(s=e,e=t),e===t&&(e=s,r=ce(),r!==t?(i=Lt(),i!==t?e=i:(s=e,e=t)):(s=e,e=t)))),e}function bt(){let e,r,i;return e=St(),e===t&&(n.charCodeAt(s)===34?(e=S,s++):(e=t,p===0&&u(ie)),e===t&&(e=s,r=ce(),r!==t?(n.charCodeAt(s)===39?(i=b,s++):(i=t,p===0&&u(fe)),i!==t?e=i:(s=e,e=t)):(s=e,e=t),e===t&&(e=s,r=ce(),r!==t?(i=Lt(),i!==t?e=i:(s=e,e=t)):(s=e,e=t)))),e}function ce(){let e;return n.charCodeAt(s)===92?(e=P,s++):(e=t,p===0&&u(Se)),e}function St(){let e,r,i,f;return e=n.charAt(s),Fr.test(e)?s++:(e=t,p===0&&u(Mr)),e===t&&(e=s,r=s,i=n.charAt(s),it.test(i)?s++:(i=t,p===0&&u(lt)),i!==t?(f=n.charAt(s),ft.test(f)?s++:(f=t,p===0&&u(at)),f!==t?(i=[i,f],r=i):(s=r,r=t)):(s=r,r=t),r!==t?e=n.substring(e,s):e=r),e}function Lt(){let e,r,i,f;return e=s,n.charCodeAt(s)===98?(r=_,s++):(r=t,p===0&&u(Vr)),r!==t&&(m=e,r=Sn()),e=r,e===t&&(e=s,n.charCodeAt(s)===102?(r=re,s++):(r=t,p===0&&u(kr)),r!==t&&(m=e,r=Ln()),e=r,e===t&&(e=s,n.charCodeAt(s)===110?(r=A,s++):(r=t,p===0&&u(Qr)),r!==t&&(m=e,r=Tn()),e=r,e===t&&(e=s,n.charCodeAt(s)===114?(r=x,s++):(r=t,p===0&&u(Br)),r!==t&&(m=e,r=En()),e=r,e===t&&(e=s,n.charCodeAt(s)===116?(r=D,s++):(r=t,p===0&&u(_r)),r!==t&&(m=e,r=wn()),e=r,e===t&&(e=s,n.charCodeAt(s)===47?(r=k,s++):(r=t,p===0&&u(Ur)),r!==t&&(m=e,r=Jn()),e=r,e===t&&(e=s,n.charCodeAt(s)===92?(r=P,s++):(r=t,p===0&&u(Se)),r!==t&&(m=e,r=Dn()),e=r,e===t&&(e=s,r=s,n.charCodeAt(s)===117?(i=Ge,s++):(i=t,p===0&&u(ct)),i!==t?(f=hs(),f!==t?r=f:(s=r,r=t)):(s=r,r=t),r!==t&&(m=e,r=vn(r)),e=r))))))),e}function hs(){let e,r,i,f,a,c;return e=s,r=ds(),r!==t&&(m=e,r=Rn(r)),e=r,e===t&&(e=s,r=s,i=$s(),i!==t?(n.charCodeAt(s)===92?(f=P,s++):(f=t,p===0&&u(Se)),f!==t?(n.charCodeAt(s)===117?(a=Ge,s++):(a=t,p===0&&u(ct)),a!==t?(c=Ns(),c!==t?r=[i,c]:(s=r,r=t)):(s=r,r=t)):(s=r,r=t)):(s=r,r=t),r!==t&&(m=e,r=r),e=r),e}function ds(){let e,r,i,f,a,c,$;if(e=s,r=s,i=j(),i===t&&(i=n.charAt(s),Cr.test(i)?s++:(i=t,p===0&&u(Wr))),i!==t){for(f=s,a=[],c=M();c!==t;)a.push(c),a.length>=3?c=t:c=M();a.length<3?(s=f,f=t):f=a,f!==t?(i=[i,f],r=i):(s=r,r=t)}else s=r,r=t;if(r!==t&&(m=e,r=On()),e=r,e===t){if(e=s,r=s,i=n.charAt(s),i.toLowerCase()===Ae?s++:(i=t,p===0&&u(Le)),i!==t)if(f=n.charAt(s),br.test(f)?s++:(f=t,p===0&&u(zr)),f!==t){for(a=s,c=[],$=M();$!==t;)c.push($),c.length>=2?$=t:$=M();c.length<2?(s=a,a=t):a=c,a!==t?(i=[i,f,a],r=i):(s=r,r=t)}else s=r,r=t;else s=r,r=t;r!==t&&(m=e,r=In()),e=r}return e}function $s(){let e,r,i,f,a,c;if(e=s,r=n.charAt(s),r.toLowerCase()===Ae?s++:(r=t,p===0&&u(Le)),r!==t)if(i=n.charAt(s),Sr.test(i)?s++:(i=t,p===0&&u(Gr)),i!==t){for(f=s,a=[],c=M();c!==t;)a.push(c),a.length>=2?c=t:c=M();a.length<2?(s=f,f=t):f=a,f!==t?(m=e,e=jn()):(s=e,e=t)}else s=e,e=t;else s=e,e=t;return e}function Ns(){let e,r,i,f,a,c;if(e=s,r=n.charAt(s),r.toLowerCase()===Ae?s++:(r=t,p===0&&u(Le)),r!==t)if(i=n.charAt(s),Lr.test(i)?s++:(i=t,p===0&&u(Hr)),i!==t){for(f=s,a=[],c=M();c!==t;)a.push(c),a.length>=2?c=t:c=M();a.length<2?(s=f,f=t):f=a,f!==t?(m=e,e=Pn()):(s=e,e=t)}else s=e,e=t;else s=e,e=t;return e}function M(){let e;return e=j(),e===t&&(e=n.charAt(s),Tr.test(e)?s++:(e=t,p===0&&u(qr))),e}function ve(){let e,r;return e=s,n.charCodeAt(s)===42?(r=mr,s++):(r=t,p===0&&u(Xr)),r!==t&&(m=e,r=Mn()),e=r,e}function Tt(){let e,r;return e=s,r=Z(),r!==t&&(m=e,r=Vn(r)),e=r,e}function Z(){let e,r,i,f,a,c;if(e=s,n.charCodeAt(s)===48?(r=yr,s++):(r=t,p===0&&u(Kr)),r!==t&&(m=e,r=kn()),e=r,e===t){if(e=s,r=s,n.charCodeAt(s)===45?(i=hr,s++):(i=t,p===0&&u(Yr)),i===t&&(i=null),f=xs(),f!==t){for(a=[],c=j();c!==t;)a.push(c),c=j();i=[i,f,a],r=i}else s=r,r=t;r!==t&&(m=e,r=Qn()),e=r}return e}function xs(){let e;return e=n.charAt(s),Er.test(e)?s++:(e=t,p===0&&u(Zr)),e}function As(){let e,r,i,f,a,c,$,y,Q,T;return e=s,r=s,i=Z(),i!==t?(f=N(),r=i):(s=r,r=t),r===t&&(r=null),n.charCodeAt(s)===58?(i=He,s++):(i=t,p===0&&u(ut)),i!==t?(f=N(),a=s,c=Z(),c!==t?($=N(),a=c):(s=a,a=t),a===t&&(a=null),c=s,n.charCodeAt(s)===58?($=He,s++):($=t,p===0&&u(ut)),$!==t?(y=s,Q=N(),T=Z(),T!==t?y=T:(s=y,y=t),y===t&&(y=null),c=y):(s=c,c=t),c===t&&(c=null),m=e,e=Bn(r,a,c)):(s=e,e=t),e}function Fs(){let e,r,i,f;return e=s,n.charCodeAt(s)===63?(r=dr,s++):(r=t,p===0&&u(en)),r!==t?(i=N(),f=Re(),f!==t?(m=e,e=_n(f)):(s=e,e=t)):(s=e,e=t),e}function Re(){let e,r,i,f,a,c,$,y;if(e=s,r=Oe(),r!==t){for(i=[],f=s,a=N(),n.substr(s,2)===ne?(c=ne,s+=2):(c=t,p===0&&u(pt)),c!==t?($=N(),y=Oe(),y!==t?(a=[a,c,$,y],f=a):(s=f,f=t)):(s=f,f=t);f!==t;)i.push(f),f=s,a=N(),n.substr(s,2)===ne?(c=ne,s+=2):(c=t,p===0&&u(pt)),c!==t?($=N(),y=Oe(),y!==t?(a=[a,c,$,y],f=a):(s=f,f=t)):(s=f,f=t);m=e,e=Un(r,i)}else s=e,e=t;return e}function Oe(){let e,r,i,f,a,c,$,y;if(e=s,r=Ie(),r!==t){for(i=[],f=s,a=N(),n.substr(s,2)===se?(c=se,s+=2):(c=t,p===0&&u(gt)),c!==t?($=N(),y=Ie(),y!==t?(a=[a,c,$,y],f=a):(s=f,f=t)):(s=f,f=t);f!==t;)i.push(f),f=s,a=N(),n.substr(s,2)===se?(c=se,s+=2):(c=t,p===0&&u(gt)),c!==t?($=N(),y=Ie(),y!==t?(a=[a,c,$,y],f=a):(s=f,f=t)):(s=f,f=t);m=e,e=Wn(r,i)}else s=e,e=t;return e}function Ie(){let e;return e=Cs(),e===t&&(e=Ls(),e===t&&(e=bs())),e}function Cs(){let e,r,i,f,a,c,$;return e=s,r=s,i=Et(),i!==t?(f=N(),r=i):(s=r,r=t),r===t&&(r=null),n.charCodeAt(s)===40?(i=qe,s++):(i=t,p===0&&u(mt)),i!==t?(f=N(),a=Re(),a!==t?(c=N(),n.charCodeAt(s)===41?($=Xe,s++):($=t,p===0&&u(yt)),$!==t?(m=e,e=zn(r,a)):(s=e,e=t)):(s=e,e=t)):(s=e,e=t),e}function Et(){let e;return n.charCodeAt(s)===33?(e=$r,s++):(e=t,p===0&&u(tn)),e}function bs(){let e,r,i,f;return e=s,r=s,i=Et(),i!==t?(f=N(),r=i):(s=r,r=t),r===t&&(r=null),i=wt(),i===t&&(i=je()),i!==t?(m=e,e=Gn(r,i)):(s=e,e=t),e}function wt(){let e;return e=Ss(),e===t&&(e=Je()),e}function Ss(){let e,r,i;return e=s,r=Jt(),r!==t?(i=$t(),i!==t?(m=e,e=Hn(i)):(s=e,e=t)):(s=e,e=t),e}function Jt(){let e;return n.charCodeAt(s)===64?(e=Nr,s++):(e=t,p===0&&u(rn)),e}function Ls(){let e,r,i,f,a,c;return e=s,r=vt(),r!==t?(i=N(),f=Ts(),f!==t?(a=N(),c=vt(),c!==t?(m=e,e=qn(r,f,c)):(s=e,e=t)):(s=e,e=t)):(s=e,e=t),e}function Dt(){let e,r;return e=s,r=Ds(),r===t&&(r=Ft(),r===t&&(r=Os(),r===t&&(r=Is(),r===t&&(r=js())))),r!==t&&(m=e,r=Xn(r)),e=r,e}function vt(){let e;return e=Dt(),e===t&&(e=Es(),e===t&&(e=je())),e}function Ts(){let e;return n.substr(s,2)===Ke?(e=Ke,s+=2):(e=t,p===0&&u(nn)),e===t&&(n.substr(s,2)===Ye?(e=Ye,s+=2):(e=t,p===0&&u(sn)),e===t&&(n.substr(s,2)===Ze?(e=Ze,s+=2):(e=t,p===0&&u(on)),e===t&&(n.substr(s,2)===et?(e=et,s+=2):(e=t,p===0&&u(fn)),e===t&&(e=n.charAt(s),wr.test(e)?s++:(e=t,p===0&&u(ln)))))),e}function Es(){let e;return e=ws(),e===t&&(e=Js()),e}function ws(){let e,r,i;return e=s,r=Jt(),r!==t?(i=Rt(),m=e,e=Kn(i)):(s=e,e=t),e}function Js(){let e,r,i;return e=s,r=xt(),r!==t?(i=Rt(),m=e,e=Yn(i)):(s=e,e=t),e}function Rt(){let e,r,i,f,a;for(e=s,r=[],i=s,f=N(),a=Ot(),a===t&&(a=It()),a!==t?i=a:(s=i,i=t);i!==t;)r.push(i),i=s,f=N(),a=Ot(),a===t&&(a=It()),a!==t?i=a:(s=i,i=t);return m=e,r=r,e=r,e}function Ot(){let e,r,i,f;return e=s,n.charCodeAt(s)===91?(r=Fe,s++):(r=t,p===0&&u(Te)),r!==t?(i=At(),i!==t?(n.charCodeAt(s)===93?(f=Ce,s++):(f=t,p===0&&u(Ee)),f!==t?(m=e,e=Zn(i)):(s=e,e=t)):(s=e,e=t)):(s=e,e=t),e===t&&(e=s,n.charCodeAt(s)===46?(r=be,s++):(r=t,p===0&&u(we)),r!==t?(i=Me(),i!==t?(m=e,e=es(i)):(s=e,e=t)):(s=e,e=t)),e}function It(){let e,r,i,f;return e=s,n.charCodeAt(s)===91?(r=Fe,s++):(r=t,p===0&&u(Te)),r!==t?(i=Tt(),i!==t?(n.charCodeAt(s)===93?(f=Ce,s++):(f=t,p===0&&u(Ee)),f!==t?(m=e,e=ts(i)):(s=e,e=t)):(s=e,e=t)):(s=e,e=t),e}function Ds(){let e,r,i,f;return e=s,r=Z(),r===t&&(n.substr(s,2)===tt?(r=tt,s+=2):(r=t,p===0&&u(an))),r!==t?(i=vs(),i===t&&(i=null),f=Rs(),f===t&&(f=null),m=e,e=rs(r,i,f)):(s=e,e=t),e}function vs(){let e,r,i,f,a;if(e=s,r=s,n.charCodeAt(s)===46?(i=be,s++):(i=t,p===0&&u(we)),i!==t){if(f=[],a=j(),a!==t)for(;a!==t;)f.push(a),a=j();else f=t;f!==t?(i=[i,f],r=i):(s=r,r=t)}else s=r,r=t;return r!==t?e=n.substring(e,s):e=r,e}function Rs(){let e,r,i,f,a;if(e=s,r=n.charAt(s),r.toLowerCase()===xr?s++:(r=t,p===0&&u(cn)),r!==t){if(i=n.charAt(s),Jr.test(i)?s++:(i=t,p===0&&u(un)),i===t&&(i=null),f=[],a=j(),a!==t)for(;a!==t;)f.push(a),a=j();else f=t;f!==t?(m=e,e=ns(i,f)):(s=e,e=t)}else s=e,e=t;return e}function Os(){let e,r;return e=s,n.substr(s,4)===rt?(r=rt,s+=4):(r=t,p===0&&u(pn)),r!==t&&(m=e,r=ss()),e=r,e}function Is(){let e,r;return e=s,n.substr(s,5)===nt?(r=nt,s+=5):(r=t,p===0&&u(gn)),r!==t&&(m=e,r=os()),e=r,e}function js(){let e,r;return e=s,n.substr(s,4)===st?(r=st,s+=4):(r=t,p===0&&u(mn)),r!==t&&(m=e,r=is()),e=r,e}function Ps(){let e,r,i,f,a;if(e=s,r=s,i=Ms(),i!==t){for(f=[],a=jt();a!==t;)f.push(a),a=jt();i=[i,f],r=i}else s=r,r=t;return r!==t?e=n.substring(e,s):e=r,e}function jt(){let e;return e=n.charAt(s),Dr.test(e)?s++:(e=t,p===0&&u(yn)),e}function Ms(){let e;return e=n.charAt(s),vr.test(e)?s++:(e=t,p===0&&u(hn)),e}function je(){let e,r,i,f,a,c,$,y,Q,T,Bt,z;if(e=s,r=Ps(),r!==t)if(n.charCodeAt(s)===40?(i=qe,s++):(i=t,p===0&&u(mt)),i!==t){if(f=N(),a=s,c=Pe(),c!==t){for($=[],y=s,Q=N(),n.charCodeAt(s)===44?(T=oe,s++):(T=t,p===0&&u(le)),T!==t?(Bt=N(),z=Pe(),z!==t?y=z:(s=y,y=t)):(s=y,y=t);y!==t;)$.push(y),y=s,Q=N(),n.charCodeAt(s)===44?(T=oe,s++):(T=t,p===0&&u(le)),T!==t?(Bt=N(),z=Pe(),z!==t?y=z:(s=y,y=t)):(s=y,y=t);a=[c,$]}else s=a,a=t;a===t&&(a=null),c=N(),n.charCodeAt(s)===41?($=Xe,s++):($=t,p===0&&u(yt)),$!==t?(m=e,e=fs(r,a)):(s=e,e=t)}else s=e,e=t;else s=e,e=t;return e}function Pe(){let e;return e=Dt(),e===t&&(e=wt(),e===t&&(e=je(),e===t&&(e=Re()))),e}function Pt(){let e;return e=Vs(),e===t&&(e=Qs()),e}function Vs(){let e,r,i;return e=Mt(),e===t&&(e=s,n.charCodeAt(s)===46?(r=be,s++):(r=t,p===0&&u(we)),r!==t?(i=ve(),i===t&&(i=Me()),i!==t?(m=e,e=ls(i)):(s=e,e=t)):(s=e,e=t)),e}function Mt(){let e,r,i,f,a,c,$,y,Q,T;if(e=s,n.charCodeAt(s)===91?(r=Fe,s++):(r=t,p===0&&u(Te)),r!==t)if(i=N(),f=De(),f!==t){for(a=[],c=s,$=N(),n.charCodeAt(s)===44?(y=oe,s++):(y=t,p===0&&u(le)),y!==t?(Q=N(),T=De(),T!==t?c=T:(s=c,c=t)):(s=c,c=t);c!==t;)a.push(c),c=s,$=N(),n.charCodeAt(s)===44?(y=oe,s++):(y=t,p===0&&u(le)),y!==t?(Q=N(),T=De(),T!==t?c=T:(s=c,c=t)):(s=c,c=t);c=N(),n.charCodeAt(s)===93?($=Ce,s++):($=t,p===0&&u(Ee)),$!==t?(m=e,e=as(f,a)):(s=e,e=t)}else s=e,e=t;else s=e,e=t;return e}function Me(){let e,r,i,f;if(e=s,r=Vt(),r!==t){for(i=[],f=kt();f!==t;)i.push(f),f=kt();m=e,e=cs()}else s=e,e=t;return e}function Vt(){let e,r,i,f;return e=ks(),e===t&&(e=n.charAt(s),Rr.test(e)?s++:(e=t,p===0&&u(dn)),e===t&&(e=s,r=s,i=n.charAt(s),it.test(i)?s++:(i=t,p===0&&u(lt)),i!==t?(f=n.charAt(s),ft.test(f)?s++:(f=t,p===0&&u(at)),f!==t?(i=[i,f],r=i):(s=r,r=t)):(s=r,r=t),r!==t?e=n.substring(e,s):e=r)),e}function kt(){let e;return e=j(),e===t&&(e=Vt()),e}function j(){let e;return e=n.charAt(s),Or.test(e)?s++:(e=t,p===0&&u($n)),e}function ks(){let e;return e=n.charAt(s),Ir.test(e)?s++:(e=t,p===0&&u(Nn)),e}function Qs(){let e,r,i;return e=s,n.substr(s,2)===ot?(r=ot,s+=2):(r=t,p===0&&u(xn)),r!==t?(i=Mt(),i===t&&(i=ve(),i===t&&(i=Me())),i!==t?(m=e,e=us(i)):(s=e,e=t)):(s=e,e=t),e}K=h();let Ve=K!==t&&s===n.length;function Qt(){throw K!==t&&s<n.length&&u(gs()),dt(ae,J<n.length?ps(J):null,J<n.length?Y(J,J+1):Y(J,J))}if(o.peg$library)return{peg$result:K,peg$currPos:s,peg$FAILED:t,peg$maxFailExpected:ae,peg$maxFailPos:J,peg$success:Ve,peg$throw:Ve?void 0:Qt};if(Ve)return K;Qt()}Wt.exports={StartRules:["JsonpathQuery"],SyntaxError:G,parse:Ys}});var po={};Hs(po,{JSONPathJS:()=>xe});module.exports=Xs(po);var gr=qs(zt());var Gt=Symbol("NodeType");function pe(n,o){return{[Gt]:void 0,value:n,path:o}}function ee(n,o,t){return pe(o,[...n.path,t])}function V(n,o,t){return pe(o,[...n.path,t])}function ke(n){return typeof n=="object"&&n!==null&&Gt in n}function Qe(n){return Array.isArray(n)?n.every(ke):!1}var v=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),H=n=>n===null||n===!0||n===!1||typeof n=="string"||typeof n=="number",te=n=>Array.isArray(n);function ge(n){let{value:o}=n;return H(o)?[]:te(o)?o.map((t,l)=>V(n,t,l)):v(o)?Object.entries(o).map(([t,l])=>ee(n,l,t)):[]}var Be=n=>{let o=[];o.push(n);for(let t of ge(n))o.push(...Be(t));return o};function qt(n,o){if(!Array.isArray(o.value))return[];let t=n.step??1,l=n.start??(t>=0?0:o.value.length-1),g=n.end??(t>=0?o.value.length:-o.value.length-1),h=[],[C,S]=Zs(l,g,t,o.value.length);if(t>0)for(let b=C;b<S;b+=t)h.push(V(o,o.value[b],b));else if(t<0)for(let b=S;C<b;b+=t)h.push(V(o,o.value[b],b));return h}function Ht(n,o){return n>=0?n:o+n}function Zs(n,o,t,l){let g=Ht(n,l),h=Ht(o,l),C,S;return t>=0?(C=Math.min(Math.max(g,0),l),S=Math.min(Math.max(h,0),l)):(S=Math.min(Math.max(g,-1),l-1),C=Math.min(Math.max(h,-1),l-1)),[C,S]}function R(n,o){return _e(n,o)}function _e(n,o,t=new WeakMap){if(n===o)return!0;if(typeof n!=typeof o||n===null||o===null)return!1;if(Array.isArray(n)&&Array.isArray(o))return n.length!==o.length?!1:n.every((l,g)=>_e(l,o[g],t));if(Array.isArray(n)||Array.isArray(o))return!1;if(typeof n=="object"&&typeof o=="object"){if(t.has(n))return t.get(n)===o;t.set(n,o);let l=Object.keys(n),g=Object.keys(o);return l.length!==g.length?!1:l.every(h=>_e(n[h],o[h],t))}return!1}var Xt={"=="(n,o){return R(n,o)},"!="(n,o){return!R(n,o)},"<"(){return!1},"<="(n,o){return R(n,o)},">"(){return!1},">="(n,o){return R(n,o)}};var Kt={"=="(n,o){return n===o},"!="(n,o){return n!==o},"<"(){return!1},"<="(n,o){return n===o},">"(){return!1},">="(n,o){return n===o}};var F={__type:"Nothing"};var Yt={"=="(n,o){return(n===F||o===F)&&n===o},"!="(n,o){return(n===F||o===F)&&n!==o},"<"(){return!1},"<="(n,o){return(n===F||o===F)&&n===o},">"(){return!1},">="(n,o){return(n===F||o===F)&&n===o}};var Zt={"=="(n,o){return n===o},"!="(n,o){return n!==o},"<"(){return!1},"<="(n,o){return n===o},">"(){return!1},">="(n,o){return n===o}};var er={"=="(n,o){return n===o},"!="(n,o){return n!==o},"<"(n,o){return typeof o!="number"?!1:n<o},"<="(n,o){return typeof o!="number"?!1:n<=o},">"(n,o){return typeof o!="number"?!1:n>o},">="(n,o){return typeof o!="number"?!1:n>=o}};var tr={"=="(n,o){return R(n,o)},"!="(n,o){return!R(n,o)},"<"(){return!1},"<="(n,o){return R(n,o)},">"(){return!1},">="(n,o){return R(n,o)}};var rr={"=="(n,o){return n===o},"!="(n,o){return n!==o},"<"(n,o){return n<o},"<="(n,o){return n<=o},">"(n,o){return n>o},">="(n,o){return n>=o}};var E;(t=>(t.LogicalTrue={type:"LogicalType"},t.LogicalFalse={type:"LogicalFalse"}))(E||={});var me=n=>n?E.LogicalTrue:E.LogicalFalse,Ue=n=>n===E.LogicalTrue||n===E.LogicalFalse;var w={type:"ValueType",convert:n=>{if(n===F||H(n))return n;if(ke(n))return n.value;if(Qe(n)){if(n.length===0)return F;if(n.length===1)return n[0].value}throw new Error(`Invalid argument type "${JSON.stringify(n)}" is not a ValueType`)}},ye={type:"NodesType",convert:n=>{if(Qe(n))return n;throw new Error(`Invalid argument type "${JSON.stringify(n)}" is not a NodesType`)}},he={type:"LogicalType",convert:n=>{if(n===!0)return E.LogicalTrue;if(n===!1)return E.LogicalFalse;if(Array.isArray(n)){if(n.length===0)return E.LogicalFalse;if(n.length>=1)return E.LogicalTrue}throw new Error(`Invalid argument type "${JSON.stringify(n)}" is not a LogicalType`)}},O=n=>n,q=(n,o)=>{let t=n.args;if(o.length!==t.length)throw new Error(`Invalid number of arguments: ${n.name} function requires ${t.length} arguments but received ${o.length}`);return t.map((g,h)=>g.convert(o[h]))};var nr=O({name:"length",args:[ye],return:w,function:n=>n.length});var sr=O({name:"length",args:[w],return:w,function:n=>n===F?F:typeof n=="string"||Array.isArray(n)?n.length:v(n)?Object.keys(n).length:F});var de=n=>{let o="",t=!1,l=!1;for(let g=0;g<n.length;g++){let h=n[g];if(l){o+=`\\${h}`,l=!1;continue}if(h==="\\"){l=!0;continue}if(h==="["){t=!0,o+=h;continue}if(h==="]"){t=!1,o+=h;continue}h==="."&&!t&&!l?o+="[^\\n\\r]":o+=h}if(l)throw new Error("Invalid I-Regexp: ends with a backslash escape.");return o};var or=O({name:"match",args:[w,w],return:he,function:(n,o)=>{if(typeof n!="string"||typeof o!="string")return E.LogicalFalse;let t=de(o),l=new RegExp(`^(?:${t})$`,"u").test(n);return me(l)}});var ir=O({name:"search",args:[w,w],return:he,function:(n,o)=>{if(typeof n!="string"||typeof o!="string")return E.LogicalFalse;let t=de(o),l=new RegExp(t,"u").test(n);return me(l)}});var fr=O({name:"value",args:[ye],return:w,function:n=>n.length===1?n[0].value:F});var I={length:sr,count:nr,match:or,search:ir,value:fr},$e=(n,o,t)=>{let l=n.args.map(g=>eo(g,o,t));switch(n.name){case"length":{let g=q(I.length,l);return I.length.function.call(void 0,...g)}case"count":{let g=q(I.count,l);return I.count.function.call(void 0,...g)}case"match":{let g=q(I.match,l);return I.match.function.call(void 0,...g)}case"search":{let g=q(I.search,l);return I.search.function.call(void 0,...g)}case"value":{let g=q(I.value,l);return I.value.function.call(void 0,...g)}}return F},eo=(n,o,t)=>{switch(n.type){case"Literal":return n.member;case"CurrentNode":return Ne(n,o,[t]);case"Root":return B(n,o);case"FunctionExpr":return $e(n,o,t);default:throw new Error(`Unknown argument type "${n.type}"`)}};function ar(n,o,t){return H(t.value)?[]:ge(t).filter(l=>X(n.expr,o,l))}var X=(n,o,t)=>{let l=n.type;switch(l){case"ComparisonExpr":return to(n,o,t);case"TestExpr":return no(n,o,t);case"LogicalBinary":case"LogicalUnary":return oo(n,o,t);default:}return!1},to=(n,o,t)=>{let l=lr(n.left,o,t),g=lr(n.right,o,t);return ro(l,g,n.operator)},ro=(n,o,t)=>{if(n===F||o===F)return Yt[t](n,o);let l=n,g=o;if(Ue(l)||Ue(g))throw new Error("LogicalType can't be compared");return v(l)&&v(g)?tr[t](l,g):te(l)&&te(g)?Xt[t](l,g):typeof l=="number"&&typeof g=="number"?er[t](l,g):typeof l=="string"&&typeof g=="string"?rr[t](l,g):typeof l=="boolean"&&typeof g=="boolean"?Kt[t](l,g):l===null&&g===null?Zt[t](l,g):t==="!="},Ne=(n,o,t)=>We(n.segments,o,t),lr=(n,o,t)=>{switch(n.type){case"Literal":return n.member;case"CurrentNode":{let l=Ne(n,o,[t]);return l[0]===void 0?F:l[0].value}case"Root":return B(n,o)[0]?.value??F;case"FunctionExpr":return $e(n,o,t)}},no=(n,o,t)=>so(n.query,o,t),so=(n,o,t)=>{switch(n.type){case"FunctionExpr":{let l=$e(n,o,t);if(l===E.LogicalTrue)return!0;if(l===E.LogicalFalse)return!1;if(Array.isArray(l))return l.length>0;throw new Error(`Function ${n.name} result must be compared`)}case"CurrentNode":return Ne(n,o,[t]).length>0;case"Root":return B(n,o).length>0}return!1},oo=(n,o,t)=>{switch(n.operator){case"||":return io(n,o,t);case"&&":return fo(n,o,t);case"!":return lo(n,o,t)}},io=(n,o,t)=>{let l=X(n.left,o,t),g=X(n.right,o,t);return l||g},fo=(n,o,t)=>{let l=X(n.left,o,t),g=X(n.right,o,t);return l&&g},lo=(n,o,t)=>!X(n.expr,o,t);function B(n,o){return We(n.segments,o,[o])}function We(n,o,t){return n.reduce((g,h)=>g.flatMap(C=>ao(h,o,C)),t)}function ao(n,o,t){return Array.isArray(n)?n.map(C=>cr(C,o,t)).flat().filter(C=>C!==void 0):Be(t).flatMap(g=>n.selectors.flatMap(h=>cr(h,o,g)))}function cr(n,o,t){let l=n.type;switch(l){case"WildcardSelector":return co(n,t);case"IndexSelector":return uo(n,t);case"SliceSelector":return qt(n,t);case"MemberNameShorthand":return ur(n,t);case"NameSelector":return ur(n,t);case"FilterSelector":return ar(n,o,t);default:return l}}function co(n,o){let t=[],l=o.value;if(Array.isArray(l))for(let g in l)Object.hasOwn(l,g)&&t.push(V(o,l[g],Number(g)));else if(v(l))for(let g in l)Object.hasOwn(l,g)&&t.push(ee(o,l[g],g));return t}function ur(n,o){return v(o.value)?n.member in o.value?[ee(o,o.value[n.member],n.member)]:[]:[]}function uo(n,o){if(Array.isArray(o.value)){let t=n.index<0?o.value.length+n.index:n.index;if(0<=t&&t<o.value.length){let l=o.value.at(t);return l===void 0?[]:[V(o,l,t)]}return[]}return[]}function ze(n,o){let t=pe(n,["$"]);return B(o,t)}var pr=n=>n.replace(/['\\\b\f\n\r\t\u0000-\u001F]/g,o=>{switch(o){case"'":return"\\'";case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";default:return`\\u${o.charCodeAt(0).toString(16).padStart(4,"0")}`}});var xe=class{rootNode;constructor(o){let t=(0,gr.parse)(o);this.rootNode=t}find(o){return ze(o,this.rootNode).filter(l=>l!==void 0).map(l=>l.value)}#e(o){return typeof o=="string"?o==="$"?"$":`['${pr(o)}']`:`[${o}]`}paths(o){return this.pathSegments(o).map(t=>({value:t.value,path:"$"+t.segments.map(l=>this.#e(l)).join("")}))}pathSegments(o){return ze(o,this.rootNode).filter(l=>l!==void 0).map(l=>({value:l.value,segments:l.path.slice(1)}))}};0&&(module.exports={JSONPathJS});
